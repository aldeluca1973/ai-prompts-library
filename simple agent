# Helpers
import os
import json

from langchain.llms import OpenAI

# Agent imports
from langchain.agents import load_tools
from langchain.agents import initialize_agent

# Set your Google CSE ID and API Key or use the default values
GOOGLE_CSE_ID = os.getenv('GOOGLE_CSE_ID', 'YourAPIKeyIfNotSet')
GOOGLE_API_KEY = os.getenv('GOOGLE_API_KEY', 'YourAPIKeyIfNotSet')

# Initialize OpenAI language model
llm = OpenAI(temperature=0, openai_api_key=openai_api_key)

# Initialize GoogleSearchAPIWrapper and TextRequestsWrapper
search = GoogleSearchAPIWrapper(google_api_key=GOOGLE_API_KEY, google_cse_id=GOOGLE_CSE_ID)
requests = TextRequestsWrapper()

# Create a toolkit of tools for the agent
toolkit = [
    Tool(
        name="Search",
        func=search.run,
        description="useful for when you need to search google to answer questions about current events"
    ),
    Tool(
        name="Requests",
        func=requests.get,
        description="Useful for when you to make a request to a URL"
    ),
]

# Initialize the agent with the toolkit and OpenAI language model
agent = initialize_agent(toolkit, llm, agent="zero-shot-react-description", verbose=True, return_intermediate_steps=True)

# Interact with the agent and get responses
response = agent({"input": "What is the capital of Canada?"})
response['output']

response = agent({"input": "Tell me what the comments are about on this webpage https://news.ycombinator.com/item?id=34425779"})
response['output']
